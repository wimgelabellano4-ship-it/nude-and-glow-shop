<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nude & Glow | Beauty Essentials</title>
    
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Lato:wght@300;400;700&display=swap" rel="stylesheet">
    <style>
        /* --- THEME SETTINGS --- */
        :root {
            --bg-color: #FAF9F6;
            --card-bg: #F0E6DC;
            --primary: #Cfb096;
            --accent: #5D4037;
            --text-main: #3E2723;
            --text-muted: #795548;
            --white: #FFFFFF;
        }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            background-color: var(--bg-color);
            color: var(--text-main);
            font-family: 'Lato', sans-serif;
            overflow-x: hidden;
            position: relative;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        h1, h2, h3, h4, .logo, footer { font-family: 'Playfair Display', serif; }
        
        /* --- SPARKLE ANIMATION --- */
        #glitter-container {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none; z-index: 9999; overflow: hidden;
        }
        .glitter {
            position: absolute; top: -20px; opacity: 0; animation: fall linear forwards;
            user-select: none; font-size: 10px;
        }
        @keyframes fall {
            0% { transform: translateY(0) rotate(0deg) scale(0.8); opacity: 0; }
            10% { opacity: 0.8; transform: translateY(5vh) rotate(45deg) scale(1); }
            90% { opacity: 0.8; }
            100% { transform: translateY(105vh) rotate(360deg) scale(0.8); opacity: 0; }
        }

        /* --- HEADER --- */
        header {
            background-color: var(--white);
            padding: 20px 5%; position: sticky; top: 0; z-index: 1000;
            box-shadow: 0 2px 15px rgba(0,0,0,0.03); display: flex; justify-content: space-between; align-items: center;
        }
        .menu-toggle { display: none; background: none; border: none; font-size: 1.8rem; cursor: pointer; color: var(--text-main); }
        .logo { font-size: 1.8rem; font-weight: 700; letter-spacing: 2px; color: var(--accent); text-transform: uppercase; cursor: pointer; }
        .nav-links { display: flex; gap: 25px; list-style: none; }
        .nav-links li { cursor: pointer; }
        .nav-links a { text-decoration: none; color: var(--text-muted); font-weight: 400; transition: 0.3s; text-transform: uppercase; font-size: 0.8rem; letter-spacing: 1px; }
        .nav-links a:hover, .nav-links a.active { color: var(--accent); font-weight: bold; }
        .nav-icons { display: flex; gap: 20px; align-items: center; }
        .icon-btn { background: none; border: none; font-size: 1.5rem; cursor: pointer; color: var(--text-main); position: relative; }
        .cart-badge {
            position: absolute; top: -5px; right: -8px; background-color: var(--accent); color: white;
            font-size: 0.7rem; width: 18px; height: 18px; border-radius: 50%; display: flex; justify-content: center; align-items: center;
        }

        /* --- SECTIONS --- */
        .view-section { display: none; animation: fadeIn 0.8s ease; flex: 1; }
        .view-section.active-view { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* --- HERO --- */
        .hero {
            background: linear-gradient(rgba(0,0,0,0.2), rgba(0,0,0,0.2)), url('https://placehold.co/1200x600/E6D2C4/5d4037?text=Timeless+Beauty');
            background-size: cover; background-position: center; height: 450px; display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; color: var(--text-main); padding: 20px;
        }
        .hero h1 { font-size: 3.5rem; margin-bottom: 10px; color: #fff; text-shadow: 1px 1px 5px rgba(0,0,0,0.3); }
        .hero p { color: #f2f2f2; font-size: 1.2rem; letter-spacing: 1px; }
        .hero button {
            background-color: var(--white); color: var(--accent); padding: 12px 35px; border: none; cursor: pointer; margin-top: 25px; font-family: 'Playfair Display', serif; font-weight: bold; letter-spacing: 1px; transition: 0.3s;
        }
        .hero button:hover { background-color: var(--accent); color: var(--white); }

        /* --- FEATURES --- */
        .features-section { display: flex; justify-content: center; gap: 50px; padding: 60px 20px; background-color: #fff; border-bottom: 1px solid #eee; flex-wrap: wrap; }
        .feature-item { text-align: center; max-width: 200px; }
        .feature-item i { font-size: 2.5rem; color: var(--primary); margin-bottom: 15px; }
        .feature-item h4 { font-size: 1.1rem; color: var(--accent); margin-bottom: 5px; text-transform: uppercase; letter-spacing: 1px; }
        .feature-item p { color: var(--text-muted); font-size: 0.9rem; }

        /* --- PRODUCTS --- */
        .section-container { max-width: 1200px; margin: 40px auto; padding: 0 20px; }
        .section-title { text-align: center; font-size: 2.2rem; color: var(--accent); margin-bottom: 40px; font-style: italic; border-bottom: 1px solid #ddd; padding-bottom: 15px; }
        .product-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 40px; }
        .product-card { position: relative; height: 380px; background-color: var(--white); border-radius: 4px; overflow: hidden; box-shadow: 0 5px 15px rgba(0,0,0,0.05); cursor: pointer; }
        .prod-image-layer { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 1; }
        .prod-img { width: 100%; height: 100%; object-fit: cover; transition: transform 0.8s ease; }
        .add-btn-container { position: absolute; bottom: 20px; left: 0; width: 100%; text-align: center; z-index: 2; }
        .add-btn { background-color: rgba(255, 255, 255, 0.95); color: var(--accent); border: 1px solid var(--accent); padding: 12px 30px; font-size: 0.9rem; cursor: pointer; font-weight: bold; transition: 0.3s; pointer-events: auto; }
        .add-btn:hover { background-color: var(--accent); color: var(--white); }
        .prod-mask {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-color: var(--card-bg); z-index: 3;
            display: flex; flex-direction: column; justify-content: center; align-items: center; padding: 30px; text-align: center; transition: opacity 0.5s ease, transform 0.5s ease;
        }
        .prod-mask h3 { font-size: 1.5rem; margin-bottom: 10px; color: var(--accent); }
        .prod-mask p { font-size: 0.95rem; color: var(--text-muted); line-height: 1.5; margin-bottom: 15px; }
        .prod-mask .price { font-weight: bold; font-size: 1.2rem; color: var(--text-main); margin-bottom: 20px; }
        .product-card:hover .prod-mask { opacity: 0; transform: scale(1.05); pointer-events: none; }
        .product-card:hover .prod-img { transform: scale(1.1); }
        .skin-type-tag { background-color: rgba(255,255,255,0.6); color: var(--accent); padding: 4px 8px; font-size: 0.75rem; text-transform: uppercase; letter-spacing: 1px; margin-top: 10px; border: 1px solid var(--accent); display: inline-block; }

        /* --- ABOUT & FOOTER --- */
        .about-text { text-align: center; max-width: 800px; margin: 0 auto; line-height: 1.8; color: var(--text-muted); font-size: 1.05rem; }
        footer { background-color: #F8F5F2; color: var(--text-muted); padding: 60px 20px 40px; text-align: center; margin-top: auto; border-top: 1px solid #E6D2C4; }
        .social-icons { display: flex; justify-content: center; gap: 30px; margin-bottom: 25px; }
        .social-icons i { font-size: 1.8rem; color: #4a4a4a; cursor: pointer; transition: 0.3s; }
        .social-icons i:hover { color: var(--accent); transform: translateY(-3px); }
        .copyright { font-size: 0.9rem; color: #777; letter-spacing: 0.5px; }

        /* --- MODALS --- */
        .modal-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(62, 39, 35, 0.7); z-index: 2000; justify-content: center; align-items: center; padding: 20px; }
        .modal-box { background: var(--white); width: 100%; max-width: 450px; border-radius: 2px; padding: 30px; position: relative; max-height: 90vh; overflow-y: auto; animation: fadeIn 0.4s; border: 1px solid var(--primary); }
        .close-modal { position: absolute; top: 15px; right: 20px; font-size: 1.5rem; cursor: pointer; color: var(--accent); }
        .form-label { display: block; margin: 15px 0 5px; font-size: 0.9rem; color: var(--text-muted); font-weight: bold; }
        .form-input, .form-select { width: 100%; padding: 12px; border: 1px solid #ddd; background: #FAFAFA; font-family: 'Lato', sans-serif; }
        .modal-btn { width: 100%; padding: 15px; background: var(--accent); color: white; border: none; margin-top: 25px; cursor: pointer; font-weight: bold; letter-spacing: 1px; transition: 0.3s; }
        .modal-btn:hover { background: #3E2723; }
        
        .menu-btn { display: flex; align-items: center; justify-content: space-between; width: 100%; padding: 15px; background: white; border: 1px solid #eee; cursor: pointer; text-align: left; color: var(--text-main); transition: 0.2s; font-size: 1rem; }
        .menu-btn:hover { background-color: var(--bg-color); }
        .menu-btn span { display: flex; align-items: center; gap: 10px; }
        
        .order-history-card { border: 1px solid #eee; padding: 15px; margin-bottom: 10px; cursor: pointer; transition: 0.2s; background: #fff; border-radius: 4px; }
        .order-history-card:hover { border-color: var(--accent); box-shadow: 0 4px 10px rgba(0,0,0,0.05); }
        .status-badge { padding: 4px 10px; border-radius: 4px; font-size: 0.75rem; font-weight: bold; text-transform: uppercase; }
        .status-processing { background-color: #FFF3E0; color: #E65100; border: 1px solid #FFE0B2; }
        .status-delivered { background-color: #E8F5E9; color: #1B5E20; border: 1px solid #C8E6C9; }
        
        .details-table { width: 100%; border-collapse: collapse; margin-top: 15px; }
        .details-table th, .details-table td { text-align: left; padding: 10px; border-bottom: 1px solid #eee; font-size: 0.9rem; }
        .details-table th { color: var(--accent); border-bottom: 1px solid var(--accent); }
        .summary-row { display: flex; justify-content: space-between; margin-bottom: 8px; font-size: 0.9rem; }
        .total-row { display: flex; justify-content: space-between; margin-top: 15px; padding-top: 15px; border-top: 1px solid #ddd; font-weight: bold; font-size: 1.2rem; color: var(--accent); }
        .active-voucher-tag { background-color: #E8F5E9; color: #2E7D32; padding: 5px 10px; border-radius: 20px; font-size: 0.8rem; margin-right: 5px; display: inline-flex; align-items: center; gap: 5px; margin-bottom: 5px; }

        @media (max-width: 768px) {
            .menu-toggle { display: block; }
            .nav-links { display: none; flex-direction: column; position: absolute; top: 70px; left: 0; width: 100%; background-color: var(--white); padding: 30px; box-shadow: 0 5px 10px rgba(0,0,0,0.1); text-align: center; gap: 20px; }
            .nav-links.active { display: flex; }
            .product-grid { grid-template-columns: 1fr; } 
            .features-section { gap: 30px; }
        }
    </style>
</head>
<body>

    <div id="glitter-container"></div>

    <header>
        <button class="menu-toggle" onclick="toggleMenu()"><i class="ph ph-list"></i></button>
        <div class="logo" onclick="switchView('home')">NUDE & GLOW</div>
        <ul class="nav-links" id="navLinks">
            <li><a href="#" onclick="switchView('home')">Home</a></li>
            <li><a href="#" onclick="switchView('all')">All Products</a></li>
            <li><a href="#" onclick="switchView('skincare')">Skincare</a></li>
            <li><a href="#" onclick="switchView('makeup')">Makeup</a></li>
            <li><a href="#" onclick="switchView('about')">About Us</a></li>
        </ul>
        <div class="nav-icons">
            <button class="icon-btn" onclick="openProfileMenu()"><i class="ph ph-user"></i></button>
            <button class="icon-btn" onclick="openCart()"><i class="ph ph-shopping-bag"></i><span class="cart-badge" id="cartCount">0</span></button>
        </div>
    </header>

    <div id="view-home" class="view-section active-view">
        <section class="hero">
            <h1>Authentic Beauty.</h1>
            <p>Premium cosmetics for your natural tone.</p>
            <button onclick="switchView('all')">SHOP COLLECTION</button>
        </section>
        <section class="features-section">
            <div class="feature-item"><i class="ph ph-plant"></i><h4>100% Vegan</h4><p>Plant-based formulas.</p></div>
            <div class="feature-item"><i class="ph ph-paw-print"></i><h4>Cruelty Free</h4><p>Never tested on animals.</p></div>
            <div class="feature-item"><i class="ph ph-sparkle"></i><h4>Long Lasting</h4><p>Glow all day.</p></div>
            <div class="feature-item"><i class="ph ph-drop"></i><h4>Hydrating</h4><p>Moisture-locking.</p></div>
        </section>
    </div>

    <div id="view-skincare" class="view-section">
        <section class="section-container">
            <h2 class="section-title">Skincare Collection</h2>
            <div class="product-grid">
                <div class="product-card">
                    <div class="prod-image-layer">
                        <img src="https://placehold.co/400x500/E6D2C4/5d4037?text=Serum+Image" class="prod-img">
                        <div class="add-btn-container"><button class="add-btn" onclick="addToCart('Glow Serum', 499)">ADD TO CART</button></div>
                    </div>
                    <div class="prod-mask"><h3>Glow Serum</h3><p>Hydrating serum enriched with Vitamin C.</p><div class="price">₱499.00</div><span class="skin-type-tag">All Skin Types</span></div>
                </div>
                <div class="product-card">
                    <div class="prod-image-layer">
                        <img src="https://placehold.co/400x500/d7b899/5d4037?text=Moisturizer+Image" class="prod-img">
                        <div class="add-btn-container"><button class="add-btn" onclick="addToCart('Daily Moisturizer', 350)">ADD TO CART</button></div>
                    </div>
                    <div class="prod-mask"><h3>Daily Moisturizer</h3><p>Locks in moisture for 24 hours.</p><div class="price">₱350.00</div><span class="skin-type-tag">Normal/Combo</span></div>
                </div>
                <div class="product-card">
                    <div class="prod-image-layer">
                        <img src="https://placehold.co/400x500/c7b299/5d4037?text=Oily+Skin+Gel" class="prod-img">
                        <div class="add-btn-container"><button class="add-btn" onclick="addToCart('Oil-Control Gel', 450)">ADD TO CART</button></div>
                    </div>
                    <div class="prod-mask"><h3>Oil-Control Gel</h3><p>Matte finish gel that minimizes pores.</p><div class="price">₱450.00</div><span class="skin-type-tag">For Oily Skin</span></div>
                </div>
                <div class="product-card">
                    <div class="prod-image-layer">
                        <img src="https://placehold.co/400x500/e0d5c1/5d4037?text=Sensitive+Balm" class="prod-img">
                        <div class="add-btn-container"><button class="add-btn" onclick="addToCart('Calming Cica Balm', 550)">ADD TO CART</button></div>
                    </div>
                    <div class="prod-mask"><h3>Calming Cica Balm</h3><p>Fragrance-free soothing relief.</p><div class="price">₱550.00</div><span class="skin-type-tag">For Sensitive Skin</span></div>
                </div>
                <div class="product-card">
                    <div class="prod-image-layer">
                        <img src="https://placehold.co/400x500/dccbb6/5d4037?text=Dry+Skin+Mask" class="prod-img">
                        <div class="add-btn-container"><button class="add-btn" onclick="addToCart('Ultra-Rich Honey Mask', 399)">ADD TO CART</button></div>
                    </div>
                    <div class="prod-mask"><h3>Ultra-Rich Honey Mask</h3><p>Deep intense nourishment.</p><div class="price">₱399.00</div><span class="skin-type-tag">For Dry Skin</span></div>
                </div>
            </div>
        </section>
    </div>

    <div id="view-makeup" class="view-section">
        <section class="section-container">
            <h2 class="section-title">Makeup Essentials</h2>
            <div class="product-grid">
                <div class="product-card">
                    <div class="prod-image-layer">
                        <img src="https://placehold.co/400x500/8D6E63/ffffff?text=Lipstick+Image" class="prod-img">
                        <div class="add-btn-container"><button class="add-btn" onclick="addToCart('Matte Nude Lip', 299)">ADD TO CART</button></div>
                    </div>
                    <div class="prod-mask"><h3>Matte Nude Lip</h3><p>Velvet finish available in 5 shades.</p><div class="price">₱299.00</div></div>
                </div>
                <div class="product-card">
                    <div class="prod-image-layer">
                        <img src="https://placehold.co/400x500/Cfb096/5d4037?text=Foundation+Image" class="prod-img">
                        <div class="add-btn-container"><button class="add-btn" onclick="addToCart('Skin Foundation', 599)">ADD TO CART</button></div>
                    </div>
                    <div class="prod-mask"><h3>Skin Foundation</h3><p>Full coverage that feels like second skin.</p><div class="price">₱599.00</div></div>
                </div>
                <div class="product-card">
                    <div class="prod-image-layer">
                        <img src="https://placehold.co/400x500/3E2723/ffffff?text=Mascara" class="prod-img">
                        <div class="add-btn-container"><button class="add-btn" onclick="addToCart('Volumizing Mascara', 399)">ADD TO CART</button></div>
                    </div>
                    <div class="prod-mask"><h3>Volumizing Mascara</h3><p>Clump-free, dramatic volume lashes.</p><div class="price">₱399.00</div></div>
                </div>
                <div class="product-card">
                    <div class="prod-image-layer">
                        <img src="https://placehold.co/400x500/ECA1A6/ffffff?text=Cream+Blush" class="prod-img">
                        <div class="add-btn-container"><button class="add-btn" onclick="addToCart('Dewy Cream Blush', 349)">ADD TO CART</button></div>
                    </div>
                    <div class="prod-mask"><h3>Dewy Cream Blush</h3><p>Natural flush for a healthy glow.</p><div class="price">₱349.00</div></div>
                </div>
                <div class="product-card">
                    <div class="prod-image-layer">
                        <img src="https://placehold.co/400x500/D4AF37/ffffff?text=Highlighter" class="prod-img">
                        <div class="add-btn-container"><button class="add-btn" onclick="addToCart('Glow Stick', 420)">ADD TO CART</button></div>
                    </div>
                    <div class="prod-mask"><h3>Glow Highlighter Stick</h3><p>Easy application for instant radiance.</p><div class="price">₱420.00</div></div>
                </div>
                <div class="product-card">
                    <div class="prod-image-layer">
                        <img src="https://placehold.co/400x500/a1887f/ffffff?text=Palette" class="prod-img">
                        <div class="add-btn-container"><button class="add-btn" onclick="addToCart('Nude Eyeshadow', 899)">ADD TO CART</button></div>
                    </div>
                    <div class="prod-mask"><h3>Nude Eyeshadow Palette</h3><p>12 pigmented shades for any look.</p><div class="price">₱899.00</div></div>
                </div>
                <div class="product-card">
                    <div class="prod-image-layer">
                        <img src="https://placehold.co/400x500/bcaaa4/ffffff?text=Setting+Spray" class="prod-img">
                        <div class="add-btn-container"><button class="add-btn" onclick="addToCart('Dewy Setting Spray', 450)">ADD TO CART</button></div>
                    </div>
                    <div class="prod-mask"><h3>Dewy Setting Spray</h3><p>Locks makeup for up to 16 hours.</p><div class="price">₱450.00</div></div>
                </div>
                <div class="product-card">
                    <div class="prod-image-layer">
                        <img src="https://placehold.co/400x500/8d6e63/ffffff?text=Brow+Gel" class="prod-img">
                        <div class="add-btn-container"><button class="add-btn" onclick="addToCart('Tinted Brow Gel', 320)">ADD TO CART</button></div>
                    </div>
                    <div class="prod-mask"><h3>Tinted Brow Gel</h3><p>Sculpt and define brows naturally.</p><div class="price">₱320.00</div></div>
                </div>
            </div>
        </section>
    </div>

    <div id="view-about" class="view-section">
        <section class="section-container" style="padding-top: 40px;">
            <h2 class="section-title">Our Story, Your Glow</h2>
            <div class="about-text">
                <p style="font-size: 1.2rem; font-style: italic; color: var(--accent); margin-bottom: 20px;">
                    "Beauty isn't about masking who you are. It's about unveiling the masterpiece within."
                </p>
                <p>
                    Welcome to <strong>Nude & Glow</strong>, a sanctuary for those who believe in the power of natural radiance. 
                    Born in 2025, our journey began with a simple yet profound realization: the beauty industry was filled with cover-ups, 
                    but lacked products that truly celebrated the skin underneath.
                </p>
                <br>
                <p>
                    We exist to bridge the delicate gap between high-performance makeup and nourishing skincare. 
                    Every bottle, tube, and palette is crafted with a dual purpose: to enhance your features instantly 
                    and improve your skin's health over time.
                </p>
                <br>
                <div style="display: flex; justify-content: center; gap: 20px; margin: 30px 0;">
                    <div style="text-align: center;">
                        <i class="ph ph-heart" style="font-size: 2rem; color: var(--primary);"></i>
                        <p style="font-size: 0.8rem; margin-top: 5px;">Made with Love</p>
                    </div>
                    <div style="text-align: center;">
                        <i class="ph ph-globe" style="font-size: 2rem; color: var(--primary);"></i>
                        <p style="font-size: 0.8rem; margin-top: 5px;">Earth Friendly</p>
                    </div>
                    <div style="text-align: center;">
                        <i class="ph ph-users" style="font-size: 2rem; color: var(--primary);"></i>
                        <p style="font-size: 0.8rem; margin-top: 5px;">Inclusive</p>
                    </div>
                </div>
                <p>
                    We pride ourselves on being <strong>100% Vegan and Cruelty-Free</strong>. Our inclusive range of nude shades 
                    ensures that every skin tone finds its perfect match, validating that your unique complexion is the standard of beauty.
                </p>
                <br>
                <p style="font-weight: bold; color: var(--accent);">
                    Join the Glow Revolution. Be confident. Be radiant. Be authentically you.
                </p>
            </div>
        </section>
    </div>

    <footer>
        <div class="social-icons">
            <i class="ph ph-instagram-logo"></i><i class="ph ph-facebook-logo"></i><i class="ph ph-tiktok-logo"></i><i class="ph ph-x-logo"></i><i class="ph ph-youtube-logo"></i>
        </div>
        <div class="copyright">&copy; Nude & Glow&reg; 2025</div>
    </footer>

    <div id="loginModal" class="modal-overlay">
        <div class="modal-box">
            <span class="close-modal" onclick="closeModal('loginModal')">&times;</span>
            <h2 style="text-align:center;">Sign In</h2>
            <p style="color:var(--text-main);display:none;text-align:center;margin:15px 0;background-color:#ffebee;padding:10px;" id="loginWarning">You must login first to shop.</p>
            <label class="form-label">Email Address</label>
            <input type="email" id="loginEmail" class="form-input" placeholder="user@email.com">
            <label class="form-label">Password</label>
            <input type="password" id="loginPass" class="form-input" placeholder="••••••">
            <button class="modal-btn" onclick="performLogin()">LOG IN</button>
            <p style="text-align:center; margin-top:15px; font-size:0.9rem;">
                No account yet? <a href="#" onclick="openRegister()" style="color:var(--accent); font-weight:bold;">Register here</a>
            </p>
        </div>
    </div>

    <div id="registerModal" class="modal-overlay">
        <div class="modal-box">
            <span class="close-modal" onclick="closeModal('registerModal')">&times;</span>
            <h2 style="text-align:center;">Create Account</h2>
            <label class="form-label">Full Name</label>
            <input type="text" id="regName" class="form-input" placeholder="Juan Dela Cruz">
            <label class="form-label">Email Address</label>
            <input type="email" id="regEmail" class="form-input" placeholder="user@email.com">
            <label class="form-label">Password</label>
            <input type="password" id="regPass" class="form-input" placeholder="••••••">
            <button class="modal-btn" onclick="performRegister()">REGISTER</button>
            <p style="text-align:center; margin-top:15px; font-size:0.9rem;">
                Already have an account? <a href="#" onclick="openLogin()" style="color:var(--accent); font-weight:bold;">Log in</a>
            </p>
        </div>
    </div>

    <div id="cartModal" class="modal-overlay">
        <div class="modal-box">
            <span class="close-modal" onclick="closeModal('cartModal')">&times;</span>
            <h2>Your Bag</h2>
            <div id="cartList" style="margin-top:20px;"></div>
            <div style="border-top:1px solid #ddd;margin-top:20px;padding-top:10px;font-weight:bold;display:flex;justify-content:space-between;font-size:1.2rem;">
                <span>Total:</span><span id="cartTotal">₱0.00</span>
            </div>
            <button class="modal-btn" id="checkoutBtn" onclick="openCheckout()">PROCEED TO CHECKOUT</button>
        </div>
    </div>

    <div id="checkoutModal" class="modal-overlay">
        <div class="modal-box">
            <span class="close-modal" onclick="closeModal('checkoutModal')">&times;</span>
            <h2>Checkout</h2>
            <div style="margin-bottom: 20px;">
                <label class="form-label">Full Name <span style="color:red">*</span></label>
                <input type="text" id="cName" class="form-input" placeholder="Enter full name">
                <label class="form-label">Contact Number <span style="color:red">*</span></label>
                <input type="number" id="cContact" class="form-input" placeholder="09xxxxxxxxx">
                <label class="form-label">Address <span style="color:red">*</span></label>
                <input type="text" id="cAddr" class="form-input" placeholder="Complete address">
            </div>
            <label class="form-label">Payment Method</label>
            <select id="cPay" class="form-select">
                <option value="COD">Cash on Delivery (COD)</option>
                <option value="GCash">GCash / E-Wallet</option>
            </select>
            
            <label class="form-label">Discount Voucher</label>
            <div class="voucher-section">
                <input type="text" id="voucherCode" class="form-input" placeholder="Enter GLOW10 or FREESHIP">
                <button onclick="applyVoucher()" style="padding:0 20px;background:var(--text-main);color:white;border:none;cursor:pointer;">APPLY</button>
            </div>
            <div id="appliedVouchersList" style="margin-bottom: 10px;"></div>
            <small id="voucherError" style="display:none;color:red;margin-bottom:10px;">Invalid Code</small>
            
            <div style="background:#FAFAFA;padding:15px;border-radius:4px;margin-top:10px;">
                <div class="summary-row"><span>Subtotal:</span><span id="summarySubtotal">₱0.00</span></div>
                <div class="summary-row"><span>Shipping Fee:</span><span id="summaryShipping">₱50.00</span></div>
                
                <div class="summary-row" id="rowShippingVoucher" style="color:green; display:none;">
                    <span>Shipping Voucher:</span><span>-₱50.00</span>
                </div>
                <div class="summary-row" id="rowProductDiscount" style="color:green; display:none;">
                    <span>Voucher Discount (10%):</span><span id="summaryDiscount">-₱0.00</span>
                </div>
                <div class="total-row"><span>Total Amount:</span><span id="summaryTotal">₱0.00</span></div>
            </div>
            <button class="modal-btn" onclick="placeOrder()">PLACE ORDER NOW</button>
        </div>
    </div>

    <div id="profileModal" class="modal-overlay">
        <div class="modal-box" style="max-width: 350px;">
            <span class="close-modal" onclick="closeModal('profileModal')">&times;</span>
            <h2 style="margin-bottom:20px;">Hi, Beauty!</h2>
            <div style="display:flex;flex-direction:column;gap:15px;">
                <button class="menu-btn" onclick="openOrders()"><span><i class="ph ph-clock-counter-clockwise"></i> Order History</span><i class="ph ph-caret-right"></i></button>
                <button class="menu-btn" onclick="performLogout()" style="color: #D32F2F; border-color: #ffcdd2;"><span><i class="ph ph-sign-out"></i> Log Out</span></button>
            </div>
        </div>
    </div>

    <div id="ordersModal" class="modal-overlay">
        <div class="modal-box">
            <span class="close-modal" onclick="closeModal('ordersModal')">&times;</span>
            <h2>Order History</h2>
            <p style="font-size:0.85rem; color:#777; margin-bottom:15px;">Click an order to view details.</p>
            <div id="ordersList" style="margin-top:10px;"></div>
        </div>
    </div>

    <div id="orderDetailsModal" class="modal-overlay">
        <div class="modal-box">
            <span class="close-modal" onclick="closeModal('orderDetailsModal')">&times;</span>
            <h2 id="viewOrderID" style="color:var(--accent);margin-bottom:5px;">ORDER #</h2>
            <div style="margin-bottom:20px; display:flex; align-items:center; gap:10px;">
                <span id="viewOrderStatus" class="status-badge"></span>
                <span id="viewOrderDate" style="color:#777; font-size:0.9rem;"></span>
            </div>
            <div style="background:#F5F5F5; padding:15px; font-size:0.9rem; border-left:3px solid var(--accent); margin-bottom:15px;">
                <strong>SHIPPING DETAILS:</strong><br>
                <span id="viewCustName"></span><br>
                <span id="viewCustContact"></span><br>
                <span id="viewCustAddr"></span>
            </div>
            <table class="details-table"><thead><tr><th>Item</th><th>Price</th></tr></thead><tbody id="viewOrderItems"></tbody></table>
            
            <div class="summary-row" style="margin-top:15px; border-top:1px solid #ddd; padding-top:10px;"><span>Subtotal:</span><span id="viewSubtotal"></span></div>
            <div class="summary-row"><span>Shipping Fee:</span><span>₱50.00</span></div>
            <div class="summary-row" style="color:green;"><span>Shipping Discount:</span><span id="viewShipDisc"></span></div>
            <div class="summary-row" style="color:green;"><span>Product Discount:</span><span id="viewProdDisc"></span></div>
            <div class="summary-row" style="font-size:0.8rem; color:#777;"><span>Vouchers:</span><span id="viewVoucherCode"></span></div>
            <div class="total-row" style="margin-top:10px;"><span>Grand Total:</span><span id="viewOrderTotal"></span></div>
            
            <button class="modal-btn" style="background-color:#9E9E9E; margin-top:15px;" onclick="closeModal('orderDetailsModal')">CLOSE DETAILS</button>
        </div>
    </div>

    <script>
        // --- SPARKLE SCRIPT ---
        function createGlitter() {
            const glitter = document.createElement('div');
            glitter.classList.add('glitter');
            glitter.innerText = ' ✨ '; 
            const side = Math.random() < 0.5 ? 'left' : 'right';
            const randomPos = Math.random() * 15; 
            if (side === 'left') glitter.style.left = randomPos + '%'; else glitter.style.left = (100 - randomPos) + '%';
            glitter.style.animationDuration = Math.random() * 10 + 15 + 's';
            document.getElementById('glitter-container').appendChild(glitter);
            setTimeout(() => { glitter.remove(); }, 25000);
        }
        setInterval(createGlitter, 500); 

        // --- NAVIGATION ---
        function switchView(viewName) {
            const views = document.querySelectorAll('.view-section');
            views.forEach(v => v.classList.remove('active-view'));
            if (viewName === 'home') document.getElementById('view-home').classList.add('active-view');
            else if (viewName === 'all') { document.getElementById('view-skincare').classList.add('active-view'); document.getElementById('view-makeup').classList.add('active-view'); }
            else if (viewName === 'skincare') document.getElementById('view-skincare').classList.add('active-view');
            else if (viewName === 'makeup') document.getElementById('view-makeup').classList.add('active-view');
            else if (viewName === 'about') document.getElementById('view-about').classList.add('active-view');
            const nav = document.getElementById('navLinks');
            nav.classList.remove('active');
            window.scrollTo(0, 0);
        }

        // --- DATABASE & SHOP SCRIPT ---
        
        // Load data from LocalStorage or initialize empty
        let usersDB = JSON.parse(localStorage.getItem('ng_users')) || [];
        let ordersDB = JSON.parse(localStorage.getItem('ng_orders')) || [];
        let currentUser = JSON.parse(localStorage.getItem('ng_current_user')) || null;

        let cart = [];
        let discountRate = 0;
        let isFreeShipping = false;
        let appliedVouchers = [];

        // Check if user is already logged in on load
        window.onload = function() {
            if(currentUser) {
                // Auto-fill checkout details if logged in
                document.getElementById('cName').value = currentUser.name;
                document.getElementById('cContact').value = currentUser.contact || '';
                document.getElementById('cAddr').value = currentUser.address || '';
            }
        };

        function toggleMenu() { document.getElementById('navLinks').classList.toggle('active'); }

        // --- AUTHENTICATION (Login/Register) ---

        function openProfileMenu() { 
            if(!currentUser) { 
                document.getElementById('loginWarning').style.display = 'none';
                document.getElementById('loginModal').style.display = 'flex'; 
            } else { 
                document.getElementById('profileModal').style.display = 'flex'; 
            } 
        }

        function openRegister() {
            closeModal('loginModal');
            document.getElementById('registerModal').style.display = 'flex';
        }

        function openLogin() {
            closeModal('registerModal');
            document.getElementById('loginModal').style.display = 'flex';
        }

        function performRegister() {
            const name = document.getElementById('regName').value;
            const email = document.getElementById('regEmail').value;
            const pass = document.getElementById('regPass').value;

            if(!name || !email || !pass) { alert("Please fill in all fields."); return; }

            // Check if email exists
            const exists = usersDB.find(u => u.email === email);
            if(exists) { alert("Email is already registered!"); return; }

            // Save new user
            const newUser = { name, email, pass, contact: '', address: '' };
            usersDB.push(newUser);
            localStorage.setItem('ng_users', JSON.stringify(usersDB));

            alert("Registration Successful! Please log in.");
            openLogin();
            
            // Clear inputs
            document.getElementById('regName').value = '';
            document.getElementById('regEmail').value = '';
            document.getElementById('regPass').value = '';
        }

        function performLogin() { 
            const email = document.getElementById('loginEmail').value;
            const pass = document.getElementById('loginPass').value;

            const user = usersDB.find(u => u.email === email && u.pass === pass);

            if(user) {
                currentUser = user;
                localStorage.setItem('ng_current_user', JSON.stringify(currentUser)); // Keep session
                closeModal('loginModal'); 
                alert(`Welcome back, ${user.name}!`);
                
                // Pre-fill checkout form
                document.getElementById('cName').value = user.name;
                document.getElementById('cContact').value = user.contact || '';
                document.getElementById('cAddr').value = user.address || '';
            } else {
                alert("Invalid Email or Password.");
            }
        }

        function performLogout() { 
            currentUser = null;
            localStorage.removeItem('ng_current_user');
            cart = []; 
            updateCart(); 
            closeModal('profileModal'); 
            alert("Logged out."); 
            
            // Clear inputs
            document.getElementById('loginEmail').value = '';
            document.getElementById('loginPass').value = '';
        }

        // --- SHOPPING CART ---

        function addToCart(name, price) {
            if(!currentUser) { 
                document.getElementById('loginWarning').style.display = 'block';
                document.getElementById('loginModal').style.display = 'flex'; 
                return; 
            }
            cart.push({name, price}); 
            updateCart();
            alert(name + " added to bag!");
        }

        function updateCart() {
            document.getElementById('cartCount').innerText = cart.length;
            const list = document.getElementById('cartList');
            if(cart.length === 0) { 
                list.innerHTML = "<p>Cart is empty.</p>"; 
                document.getElementById('checkoutBtn').style.display='none'; 
                document.getElementById('cartTotal').innerText = '₱0.00';
            } else {
                let html = '', total = 0;
                cart.forEach(i => { html += `<div>${i.name} - ₱${i.price}</div>`; total += i.price; });
                list.innerHTML = html;
                document.getElementById('cartTotal').innerText = '₱' + total.toFixed(2);
                document.getElementById('checkoutBtn').style.display='block';
            }
        }

        function openCart() { document.getElementById('cartModal').style.display = 'flex'; }

        // --- CHECKOUT ---

        function openCheckout() {
            closeModal('cartModal');
            document.getElementById('checkoutModal').style.display = 'flex';
            discountRate = 0; isFreeShipping = false; appliedVouchers = [];
            
            // Auto-fill from current user data if available
            if(currentUser) {
                document.getElementById('cName').value = currentUser.name;
                document.getElementById('cContact').value = currentUser.contact || '';
                document.getElementById('cAddr').value = currentUser.address || '';
            }

            renderAppliedVouchers(); 
            updateCheckoutMath();
        }

        function renderAppliedVouchers() {
            const container = document.getElementById('appliedVouchersList');
            container.innerHTML = '';
            appliedVouchers.forEach(v => { container.innerHTML += `<span class="active-voucher-tag"><i class="ph ph-tag"></i> ${v}</span>`; });
        }

        function applyVoucher() {
            const code = document.getElementById('voucherCode').value.toUpperCase().trim();
            const errorMsg = document.getElementById('voucherError'); errorMsg.style.display = 'none';
            
            if(code === 'GLOW10') {
                if(!appliedVouchers.includes('GLOW10')) { discountRate = 0.10; appliedVouchers.push('GLOW10'); }
            } else if (code === 'FREESHIP') {
                if(!appliedVouchers.includes('FREESHIP')) { isFreeShipping = true; appliedVouchers.push('FREESHIP'); }
            } else { errorMsg.style.display = 'block'; return; }
            
            document.getElementById('voucherCode').value = ''; renderAppliedVouchers(); updateCheckoutMath();
        }

        function updateCheckoutMath() {
            let subtotal = cart.reduce((s, i) => s + i.price, 0);
            let discountAmt = subtotal * discountRate;
            let shipFee = 50;
            let shipDiscount = isFreeShipping ? 50 : 0;
            let total = subtotal - discountAmt + (shipFee - shipDiscount);
            
            document.getElementById('summarySubtotal').innerText = '₱' + subtotal.toFixed(2);
            document.getElementById('summaryDiscount').innerText = '-₱' + discountAmt.toFixed(2);
            document.getElementById('summaryTotal').innerText = '₱' + total.toFixed(2);
            
            document.getElementById('rowShippingVoucher').style.display = isFreeShipping ? 'flex' : 'none';
            document.getElementById('rowProductDiscount').style.display = discountRate > 0 ? 'flex' : 'none';
            
            return { subtotal, discountAmt, shipFee, shipDiscount, total };
        }

        function placeOrder() {
            const name = document.getElementById('cName').value;
            const contact = document.getElementById('cContact').value;
            const addr = document.getElementById('cAddr').value;
            const payment = document.getElementById('cPay').value;

            if(!name || !contact || !addr) { alert("Please complete details."); return; }
            
            const math = updateCheckoutMath();
            const id = 'ORD-' + Math.floor(Math.random()*9000+1000);
            
            // Create Order Object
            const newOrder = {
                id, 
                userEmail: currentUser.email, // Link order to user
                date: new Date().toLocaleDateString() + ' ' + new Date().toLocaleTimeString(), 
                total: math.total, 
                subtotal: math.subtotal, 
                shipping: math.shipFee, 
                shipDisc: math.shipDiscount,
                discount: math.discountAmt, 
                vouchers: [...appliedVouchers],
                status: 'Processing', 
                payment, 
                customer: { name, contact, address: addr }, 
                items: [...cart]
            };

            // Save to Orders Database (LocalStorage)
            ordersDB.unshift(newOrder);
            localStorage.setItem('ng_orders', JSON.stringify(ordersDB));
            
            // Update User Profile with Address/Contact for future
            if(currentUser) {
                currentUser.contact = contact;
                currentUser.address = addr;
                // Update specific user in usersDB
                const userIndex = usersDB.findIndex(u => u.email === currentUser.email);
                if(userIndex > -1) {
                    usersDB[userIndex] = currentUser;
                    localStorage.setItem('ng_users', JSON.stringify(usersDB));
                    localStorage.setItem('ng_current_user', JSON.stringify(currentUser));
                }
            }

            cart = []; 
            updateCart(); 
            closeModal('checkoutModal');
            alert(`Order Placed Successfully!\n\nOrder ID: ${id}\nStatus: Processing`); 
            openOrders();
        }

        // --- ORDER HISTORY ---

        function openOrders() {
            closeModal('profileModal');
            const list = document.getElementById('ordersList');
            document.getElementById('ordersModal').style.display = 'flex';

            // Filter orders for ONLY the current user
            const myOrders = ordersDB.filter(o => o.userEmail === currentUser.email);

            if(myOrders.length === 0) list.innerHTML = "<p>No orders yet.</p>";
            else {
                let html = '';
                myOrders.forEach(o => {
                    let badgeClass = o.status === 'Processing' ? 'status-processing' : 'status-delivered';
                    html += `<div class="order-history-card" onclick="openOrderDetails('${o.id}')"><div style="display:flex;justify-content:space-between;font-weight:bold;margin-bottom:5px;"><span style="color:var(--accent)">${o.id}</span><span class="status-badge ${badgeClass}">${o.status}</span></div><div style="font-size:0.9rem;color:#555;">${o.date} • ${o.items.length} Items</div><div style="font-weight:bold;text-align:right;margin-top:5px;">₱${o.total.toFixed(2)}</div></div>`;
                });
                list.innerHTML = html;
            }
        }

        function openOrderDetails(id) {
            const order = ordersDB.find(o => o.id === id);
            if(!order) return;
            document.getElementById('viewOrderID').innerText = order.id;
            document.getElementById('viewOrderDate').innerText = order.date;
            document.getElementById('viewOrderStatus').innerText = order.status;
            document.getElementById('viewCustName').innerText = order.customer.name;
            document.getElementById('viewCustContact').innerText = order.customer.contact;
            document.getElementById('viewCustAddr').innerText = order.customer.address;
            let itemsHtml = ''; order.items.forEach(i => { itemsHtml += `<tr><td>${i.name}</td><td>₱${i.price.toFixed(2)}</td></tr>`; });
            document.getElementById('viewOrderItems').innerHTML = itemsHtml;
            document.getElementById('viewSubtotal').innerText = '₱' + order.subtotal.toFixed(2);
            document.getElementById('viewShipDisc').innerText = '-₱' + order.shipDisc.toFixed(2);
            document.getElementById('viewProdDisc').innerText = '-₱' + order.discount.toFixed(2);
            document.getElementById('viewVoucherCode').innerText = order.vouchers.length > 0 ? order.vouchers.join(', ') : 'None';
            document.getElementById('viewOrderTotal').innerText = '₱' + order.total.toFixed(2);
            
            document.getElementById('ordersModal').style.display = 'none';
            document.getElementById('orderDetailsModal').style.display = 'flex';
        }

        function closeModal(id) { 
            document.getElementById(id).style.display = 'none'; 
            if(id === 'orderDetailsModal') document.getElementById('ordersModal').style.display = 'flex';
        }
        
        window.onclick = function(e) { 
            if(e.target.classList.contains('modal-overlay')) e.target.style.display = "none"; 
            const nav = document.getElementById('navLinks');
            const toggle = document.querySelector('.menu-toggle'); 
            if(nav.classList.contains('active') && !nav.contains(e.target) && !toggle.contains(e.target)) nav.classList.remove('active'); 
        }
    </script>
</body>
</html>
